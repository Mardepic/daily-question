<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reflection Diary 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body { 
        font-family: 'Georgia', serif;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        min-height: 100vh;
        padding: 20px;
        color: #2c3e50;
    }

    #loginContainer {
        max-width: 400px;
        margin: 100px auto;
        background: white;
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    }

    #loginContainer h2 {
        text-align: center;
        margin-bottom: 30px;
        color: #34495e;
        font-size: 28px;
    }

    #loginContainer input {
        width: 100%;
        padding: 12px;
        margin-bottom: 15px;
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        font-size: 16px;
        transition: border-color 0.3s;
    }

    #loginContainer input:focus {
        outline: none;
        border-color: #3498db;
    }

    #diaryContainer {
        max-width: 1200px;
        margin: 0 auto;
    }

    .diary-header {
        text-align: center;
        margin-bottom: 40px;
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.08);
    }

    .diary-header h1 {
        font-size: 36px;
        color: #2c3e50;
        margin-bottom: 10px;
        font-weight: 400;
        letter-spacing: 1px;
    }

    #weekNumber {
        font-size: 20px;
        color: #7f8c8d;
        font-weight: 300;
    }

    #weekContainer {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
        margin-bottom: 30px;
    }

    .day-card {
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        transition: transform 0.2s, box-shadow 0.2s;
        border-left: 5px solid #3498db;
    }

    .day-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.12);
    }

    .day-card:nth-child(1) { border-left-color: #e74c3c; }
    .day-card:nth-child(2) { border-left-color: #f39c12; }
    .day-card:nth-child(3) { border-left-color: #f1c40f; }
    .day-card:nth-child(4) { border-left-color: #2ecc71; }
    .day-card:nth-child(5) { border-left-color: #3498db; }
    .day-card:nth-child(6) { border-left-color: #9b59b6; }
    .day-card:nth-child(7) { border-left-color: #e91e63; }

    .day-title {
        font-size: 28px;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid #ecf0f1;
    }

    .question {
        font-family: 'Nunito', sans-serif;
        font-size: 18px;
        color: #34495e;
        margin-bottom: 20px;
        font-style: italic;
        line-height: 1.6;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 10px;
        border-left: 3px solid #3498db;
    }

    textarea {
        width: 100%;
        padding: 15px;
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        font-family: 'Georgia', serif;
        font-size: 16px;
        line-height: 1.8;
        resize: vertical;
        min-height: 120px;
        transition: border-color 0.3s;
    }

    textarea:focus {
        outline: none;
        border-color: #3498db;
        background: #fafbfc;
    }

    .navigation {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 20px;
    }

    button {
        padding: 12px 25px;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s;
        font-family: 'Arial', sans-serif;
        font-weight: 500;
    }

    button:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    #loginContainer button {
        width: 100%;
        background: #3498db;
        color: white;
        margin-top: 10px;
    }

    #loginContainer button:hover {
        background: #2980b9;
    }

    .nav-button {
        background: #3498db;
        color: white;
    }

    .nav-button:hover {
        background: #2980b9;
    }

    .nav-button:disabled {
        background: #95a5a6;
        cursor: not-allowed;
        transform: none;
    }

    .logout-button {
        background: #e74c3c;
        color: white;
    }

    .logout-button:hover {
        background: #c0392b;
    }

    @media (max-width: 768px) {
        .diary-header h1 {
            font-size: 28px;
        }

        .day-card {
            padding: 20px;
        }

        .day-title {
            font-size: 22px;
        }

        .navigation {
            flex-direction: column;
        }

        button {
            width: 100%;
        }
    }
</style>
</head>
<body>

<div id="loginContainer">
    <h2>‚ú® Reflection Diary</h2>
    <input type="email" id="email" placeholder="S√§hk√∂posti">
    <input type="password" id="password" placeholder="Salasana">
    <button id="registerBtn">Rekister√∂idy</button>
    <button id="loginBtn">Kirjaudu sis√§√§n</button>
</div>

<div id="diaryContainer" style="display:none;">
    <div class="diary-header">
        <h1>üìñ Reflection Diary 2026</h1>
        <div id="weekNumber"></div>
    </div>
    
    <div id="weekContainer"></div>
    
    <div class="navigation">
        <button class="nav-button" onclick="prevWeek()">‚Üê Edellinen viikko</button>
        <button class="nav-button" onclick="nextWeek()">Seuraava viikko ‚Üí</button>
    </div>
    
    <div class="navigation">
        <button class="logout-button" onclick="logout()">Kirjaudu ulos</button>
    </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";
import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

// --- Firebase Config ---
const firebaseConfig = {
    apiKey: "AIzaSyCJR7kIaO5R6b-mDigcaBUZbIv4lZhPd3g",
    authDomain: "reflection-diary-2026-d9b75.firebaseapp.com",
    projectId: "reflection-diary-2026-d9b75",
    storageBucket: "reflection-diary-2026-d9b75.firebasestorage.app",
    messagingSenderId: "40162654025",
    appId: "1:40162654025:web:49d152a55fced628f78c98",
    measurementId: "G-3RFHJPQV5Q"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth();
const db = getFirestore();

const year = 2026;
let currentWeek = 1;
const days = ["Maanantai", "Tiistai", "Keskiviikko", "Torstai", "Perjantai", "Lauantai", "Sunnuntai"];

// --- Kaikki vuoden kysymykset (365 + lis√§p√§iv√§t) ---
const allQuestions = [
    // Tammikuu (1-31)
    "Mik√§ saa sinut tuntemaan itsesi el√§v√§ksi?",
    "Millainen haluaisit olla kymmenen vuoden p√§√§st√§?",
    "Mik√§ on paras neuvo, jonka olet koskaan saanut?",
    "Mist√§ asiasta olet viimeksi muuttanut mielipidett√§si?",
    "Mik√§ lapsuusmuistosi on kirkkain?",
    "Millaista rakkautta haluat el√§m√§√§si?",
    "Mik√§ pelko est√§√§ sinua t√§ll√§ hetkell√§?",
    "Kenelle olet kiitollinen ja miksi?",
    "Mik√§ on suurin saavutuksesi t√§h√§n menness√§?",
    "Millainen on t√§ydellinen p√§iv√§si?",
    "Mit√§ haluaisit oppia t√§n√§ vuonna?",
    "Mik√§ asia sinussa on muuttunut viimeisen vuoden aikana?",
    "Milloin viimeksi teit jotain ensimm√§ist√§ kertaa?",
    "Mik√§ on t√§rkein arvosi?",
    "Kenelt√§ haluaisit pyyt√§√§ anteeksi?",
    "Mik√§ unelma tuntuu mahdottomalta?",
    "Millaisissa tilanteissa olet parhaimmillasi?",
    "Mit√§ sinulle merkitsee menestys?",
    "Mik√§ ominaisuutesi on vahvuutesi?",
    "Mist√§ luovut helposti ja mist√§ et?",
    "Millainen ymp√§rist√∂ saa sinut voimaan hyvin?",
    "Mik√§ musiikkikappale kuvaa t√§m√§nhetkist√§ el√§m√§√§si?",
    "Keneen olet viimeksi ihailevasti suhtautunut?",
    "Mik√§ tekee sinusta uniikin?",
    "Millaista yst√§vyytt√§ haluat vaalia?",
    "Mik√§ asia el√§m√§ss√§si kaipaa muutosta?",
    "Milloin olet viimeksi nauranut kunnolla?",
    "Mit√§ haluat sanoa itsellesi viiden vuoden p√§√§st√§?",
    "Mik√§ on suurin haaveesi?",
    "Mist√§ haluaisit p√§√§st√§√§ irti?",
    "Mik√§ sinussa on pysynyt samana lapsesta asti?",
    // Helmikuu (32-59)
    "Kenelle haluaisit soittaa juuri nyt?",
    "Mik√§ on t√§rkein opetuksesi rakkaudesta?",
    "Miten osoitat v√§litt√§mist√§si?",
    "Kenelt√§ kaipaat anteeksiantoa?",
    "Millainen yst√§v√§ olet?",
    "Mik√§ on suurin v√§√§rinymm√§rryksesi ihmissuhteissasi?",
    "Kenelle haluaisit sanoa 'rakastan sinua'?",
    "Mik√§ tekee suhteesta hyv√§n?",
    "Miten k√§sittelet konflikteja?",
    "Keneen luotat ehdoitta?",
    "Millaista tukea tarvitset muilta?",
    "Mik√§ on paras yhteinen muistosi jonkun kanssa?",
    "Miten haluat tulla muistetuksi?",
    "Kenelle olet t√§rkein?",
    "Mik√§ on viimeisin merkityksellinen keskustelusi?",
    "Miten voisit olla parempi kumppani?",
    "Mik√§ tekee ihmisest√§ kiinnostavan?",
    "Kenelt√§ olet oppinut eniten el√§m√§st√§?",
    "Millaista rakkautta annat itsellesi?",
    "Mik√§ on sinulle t√§rke√§√§ perheess√§?",
    "Miten haluat vaikuttaa muihin ihmisiin?",
    "Kenelle haluaisit kirjoittaa kirjeen?",
    "Mik√§ on suurin uhrauksesi jonkun puolesta?",
    "Miten hoidat yst√§vyyssuhteita?",
    "Mik√§ tekee sinusta hyv√§n kuuntelijan?",
    "Keneen haluaisit olla paremmin yhteydess√§?",
    "Millaista yhteytt√§ kaipaat?",
    "Mik√§ on paras komplimentti, jonka olet saanut?",
    // Maaliskuu (60-90)
    "Mik√§ virheesi on opettanut sinulle eniten?",
    "Mit√§ haluaisit osata t√§ydellisesti?",
    "Mik√§ haastaa sinua positiivisesti?",
    "Millainen oppija olet?",
    "Mik√§ kirja on muuttanut ajatteluasi?",
    "Mist√§ aiheesta haluaisit tiet√§√§ enemm√§n?",
    "Mik√§ on ollut t√§rkein oppituntisi t√§n√§ vuonna?",
    "Miten kehit√§t itse√§si?",
    "Mik√§ taito olisi sinulle hy√∂dyllinen?",
    "Kenelt√§ haluaisit oppia?",
    "Mik√§ asia on sinulle viel√§ vaikeaa?",
    "Millainen haaste houkuttelee sinua?",
    "Mit√§ neuvoa antaisit nuoremmalle itsellesi?",
    "Mik√§ ep√§onnistumisesi on ollut siunaus?",
    "Miten suhtaudut virheisiin?",
    "Mik√§ motivoi sinua oppimaan?",
    "Millainen opettaja olet muille?",
    "Mik√§ taitosi on kehittynyt viime aikoina?",
    "Mit√§ haluat ymm√§rt√§√§ paremmin?",
    "Mik√§ on seuraava kehityshaasteesi?",
    "Miten k√§sittelet pettymyksi√§?",
    "Mik√§ kokemus on kypsytt√§nyt sinua?",
    "Millainen kasvu tuntuu oikealta?",
    "Mist√§ haluaisit olla rohkeampi?",
    "Mik√§ uusi n√§k√∂kulma on avannut silmi√§si?",
    "Miten otat vastaan palautetta?",
    "Mik√§ on paras oppisi vastoink√§ymisist√§?",
    "Millainen mentori tarvitsisit?",
    "Mik√§ kysymys askarruttaa sinua?",
    "Miten haluat kehitty√§ ihmisen√§?",
    "Mik√§ tietosi on osoittautunut v√§√§r√§ksi?",
    // Huhtikuu (91-120)
    "Mik√§ tekee sinut luovaksi?",
    "Milloin olet viimeksi luonut jotain?",
    "Mik√§ into on j√§√§nyt toteuttamatta?",
    "Millainen taide koskettaa sinua?",
    "Mit√§ tekisit, jos ep√§onnistuminen olisi mahdotonta?",
    "Mik√§ harrastus tuo sinulle iloa?",
    "Millainen projekti innostaisi sinua?",
    "Mist√§ saat inspiraatiota?",
    "Mik√§ est√§√§ luovuuttasi?",
    "Millainen ymp√§rist√∂ her√§tt√§√§ mielikuvituksesi?",
    "Mik√§ taitosi on aliarvostettu?",
    "Mit√§ haluaisit luoda maailmaan?",
    "Mik√§ intohimosi on vahvin?",
    "Millainen leikki oli lapsena lempi√§si?",
    "Miten ilmaiset itse√§si?",
    "Mik√§ tekee sinusta energisen?",
    "Millainen luova prosessi sopii sinulle?",
    "Mist√§ unelmoit hiljaisina hetkin√§?",
    "Mik√§ projekti j√§i kesken?",
    "Millainen musiikki her√§tt√§√§ tunteesi?",
    "Mik√§ luova ty√∂ kiinnostaisi sinua?",
    "Miten voisit tuoda enemm√§n luovuutta arkeen?",
    "Mik√§ on erikoisin ideasi?",
    "Millainen taide haluaisit luoda?",
    "Mist√§ l√∂yd√§t flow-tilasi?",
    "Mik√§ intosi ansaitsisi enemm√§n aikaa?",
    "Millainen on luova tilasi?",
    "Mik√§ esto pit√§isi murtaa?",
    "Mist√§ saat voimaa luoda?",
    "Mik√§ tekisi sinusta onnellisemman luojan?",
    // Toukokuu (121-151)
    "Miten kehosi voi t√§n√§√§n?",
    "Mik√§ liikunta tuo sinulle iloa?",
    "Millainen ruoka ravitsee sinua parhaiten?",
    "Miten palaudut stressist√§?",
    "Mik√§ on t√§rkein huolehtimisesi tapa?",
    "Millainen uni tekee sinusta lev√§nneen?",
    "Mik√§ luontoel√§mys on j√§√§nyt mieleesi?",
    "Miten kuuntelet kehoasi?",
    "Mik√§ on paras tapasi rentoutua?",
    "Millainen liikunta haastaa sinua sopivasti?",
    "Mik√§ ruoka tuo sinulle lohtua?",
    "Miten hoidat terveytt√§si?",
    "Mik√§ on lempipaikkasi luonnossa?",
    "Millainen aamurituaali sopisi sinulle?",
    "Miten k√§sittelet kipua?",
    "Mik√§ tekee olosi virke√§ksi?",
    "Millainen lepo on sinulle t√§rke√§√§?",
    "Miten kehosi on muuttunut?",
    "Mik√§ tekee sinut vahvaksi?",
    "Millainen kosketus on sinulle t√§rke√§?",
    "Miten voisit liikkua enemm√§n ilosta?",
    "Mik√§ rutiini parantaa hyvinvointiasi?",
    "Millainen yhteys kehollasi ja mielell√§ on?",
    "Mik√§ tekee sinut energiseksi?",
    "Miten hoidat itse√§si sairaana?",
    "Mik√§ ulkoilma-aktiviteetti ilahduttaa sinua?",
    "Millainen ravinto tukee jaksamistasi?",
    "Miten kehosi viestii sinulle?",
    "Mik√§ on sinulle pyh√§ hetki p√§iv√§ss√§?",
    "Millainen kehosi on viisas?",
    "Miten haluat huolehtia itsest√§si paremmin?",
    // Kes√§kuu (152-181)
    "Mik√§ seikkailu kutsuisi sinua?",
    "Mihin haluaisit matkustaa?",
    "Mik√§ tekee sinusta vapaan?",
    "Millainen kes√§p√§iv√§ on t√§ydellinen?",
    "Mist√§ nautit kes√§ll√§ eniten?",
    "Mik√§ spontaani teko houkuttelisi?",
    "Millainen matka muuttaisi sinua?",
    "Mik√§ on parasta vapaudessa?",
    "Mihin haluaisit hyp√§t√§ p√§√§t√§ ensin?",
    "Millainen riski kannattaisi ottaa?",
    "Mik√§ paikka tuntuu kodilta?",
    "Mist√§ l√∂yd√§t rauhan?",
    "Millainen seikkailu pelottaa ja innostaa?",
    "Mik√§ vuodenaika kuvaa sinua parhaiten?",
    "Mihin haluaisit paeta juuri nyt?",
    "Mik√§ tekee hetkest√§ ikimuistoisen?",
    "Millainen matkakumppani olet?",
    "Mik√§ kulttuuriel√§mys on koskettanut sinua?",
    "Mihin suuntaan haluaisit ajelehtia?",
    "Mik√§ on paras spontaani muistosi?",
    "Millainen vapaus on sinulle t√§rke√§√§?",
    "Mik√§ este est√§√§ seikkailua?",
    "Mihin haluaisit kuluttaa kes√§si?",
    "Mik√§ tekee sinusta rohkean?",
    "Millainen paikka inspiroi sinua?",
    "Mik√§ matka olisi unelmiesi matka?",
    "Miten voisit tuoda enemm√§n seikkailua arkeen?",
    "Mik√§ on parasta kes√§ss√§?",
    "Millainen vapaus tekisi sinusta onnellisen?",
    "Mihin suuntaan el√§m√§si voisi suunnata?",
    // Hein√§kuu (182-212)
    "Mik√§ teki sinut iloiseksi t√§n√§√§n?",
    "Mist√§ olet syv√§sti kiitollinen?",
    "Mik√§ pieni asia tuo sinulle iloa?",
    "Kuka ihminen kirkastaa p√§iv√§si?",
    "Millainen hetki on t√§ynn√§ iloa?",
    "Mist√§ nautit aivan syd√§mest√§si?",
    "Mik√§ on paras lahjasi, jonka olet saanut?",
    "Millainen yll√§tys ilahduttaa sinua?",
    "Mist√§ haluaisit kiitt√§√§ el√§m√§√§?",
    "Mik√§ saa sinut hymyilem√§√§n?",
    "Millainen hetki on t√§ydellist√§ l√§sn√§oloa?",
    "Mist√§ arjen asiasta nautit?",
    "Mik√§ maku tai tuoksu tuo muistoja?",
    "Kenelle haluaisit sanoa kiitos?",
    "Mik√§ tekee sinusta ylpe√§n?",
    "Millainen onni on sinulle t√§rke√§√§?",
    "Mist√§ yll√§tyit positiivisesti?",
    "Mik√§ on paras muistosi viime vuodelta?",
    "Millainen hetki t√§ytt√§√§ syd√§mesi?",
    "Mist√§ haluaisit nauttia enemm√§n?",
    "Mik√§ tekee tavallisesta p√§iv√§st√§ hyv√§n?",
    "Kenelle olet tuonut iloa?",
    "Mik√§ on sinulle ylellisyytt√§?",
    "Millainen kiitollisuus l√§mmitt√§√§ sinua?",
    "Mist√§ haluat pit√§√§ kiinni?",
    "Mik√§ tapa viett√§√§ aikaa on arvokasta?",
    "Millainen ilo on puhdasta?",
    "Mist√§ tied√§t olevasi onnellinen?",
    "Mik√§ asia el√§m√§ss√§si on lahja?",
    "Millainen hetki ansaitset t√§n√§√§n?",
    "Mist√§ haluaisit kiitt√§√§ itse√§si?",
    // Elokuu (213-243)
    "Mik√§ ty√∂ss√§si on merkityksellist√§?",
    "Millainen ty√∂ olisi unelmaty√∂t√§si?",
    "Mik√§ taitosi on arvokkain?",
    "Miten haluat vaikuttaa ty√∂si kautta?",
    "Mik√§ motivoi sinua ty√∂el√§m√§ss√§?",
    "Millainen kutsumus vet√§√§ sinua?",
    "Mik√§ ty√∂ss√§si on haastavaa?",
    "Miten haluat kehitty√§ ammatissasi?",
    "Mik√§ tekee ty√∂p√§iv√§st√§ hyv√§n?",
    "Millainen ty√∂ymp√§rist√∂ tukee sinua?",
    "Mik√§ projekti on ollut merkityksellisin?",
    "Miten tasapainotat ty√∂n ja muun el√§m√§n?",
    "Mik√§ on paras palautteesi ty√∂st√§?",
    "Millainen johtaja olet tai haluaisit olla?",
    "Mik√§ haaste ty√∂ss√§ kasvattaa sinua?",
    "Miten ilmaiset ammattitaitoasi?",
    "Mik√§ on unelmaty√∂si sis√§lt√∂?",
    "Millainen ty√∂yhteis√∂ sopii sinulle?",
    "Mik√§ on suurin saavutuksesi ty√∂ss√§?",
    "Miten k√§sittelet ty√∂stressi√§?",
    "Mik√§ tekee sinusta hyv√§n ty√∂kaverin?",
    "Millainen ty√∂ tuntuu merkitykselliselt√§?",
    "Mik√§ on t√§rkein oppisi ty√∂el√§m√§st√§?",
    "Miten haluat vaikuttaa maailmaan ty√∂si kautta?",
    "Mik√§ on seuraava ammatillinen tavoitteesi?",
    "Millainen balanssi ty√∂n ja vapaa-ajan v√§lill√§ on oikea?",
    "Mik√§ innostaa sinua ty√∂ss√§si?",
    "Miten haluat muistuttaa ty√∂si j√§lki√§?",
    "Mik√§ tekee ty√∂st√§ tyydytt√§v√§√§?",
    "Millainen ura olisi sinulle oikea?",
    "Mik√§ on t√§rkein arvosi ty√∂ss√§?",
    // Syyskuu (244-273)
    "Mist√§ olisi aika p√§√§st√§√§ irti?",
    "Mik√§ muutos pelottaa sinua?",
    "Millainen uusi alku houkuttelee?",
    "Mist√§ vanhasta tottumuksesta haluat luopua?",
    "Mik√§ muutos olisi sinulle hy√∂dyksi?",
    "Miten k√§sittelet menetyst√§?",
    "Mist√§ uskomuksesta voisit luopua?",
    "Mik√§ el√§m√§si kausi on p√§√§ttym√§ss√§?",
    "Millainen muutos tekisi sinusta vapaammaksi?",
    "Mist√§ suhteesta on aika jatkaa eteenp√§in?",
    "Mik√§ on vaikein asia p√§√§st√§√§ irti?",
    "Millainen uusi versio itsest√§si haluaa synty√§?",
    "Mist√§ taakasta haluat vapautua?",
    "Mik√§ muutos on v√§ist√§m√§t√∂n?",
    "Miten voisit helpottaa muutosta?",
    "Mist√§ menneisyydest√§ pid√§t edelleen kiinni?",
    "Mik√§ pelko est√§√§ muutosta?",
    "Millainen loppu on my√∂s alku?",
    "Mist√§ haluaisit anteeksi antaa itsellesi?",
    "Mik√§ tapa ajatella ei en√§√§ palvele sinua?",
    "Millainen muutos olisi rohkeaa?",
    "Mist√§ identiteetist√§si haluat luopua?",
    "Mik√§ suru kaipaa k√§sittely√§?",
    "Millainen siirtym√§vaihe olet nyt?",
    "Mist√§ on vaikea hyv√§stell√§?",
    "Mik√§ muutos tuntuu oikealta?",
    "Miten voisit tukea itse√§si muutoksessa?",
    "Mist√§ vanhentuneesta unelmasta voit luopua?",
    "Mik√§ uusi mahdollisuus avautuu p√§√§stett√§ess√§ irti?",
    "Millainen muutos vapauttaisi energiaasi?",
    // Lokakuu (274-304)
    "Milloin viimeksi olit todella hiljaa?",
    "Mik√§ ajatus nousee hiljaisuudessa?",
    "Millainen sis√§inen √§√§ni ohjaa sinua?",
    "Mik√§ syv√§ kysymys askarruttaa sinua?",
    "Miten l√∂yd√§t rauhan sis√§lt√§si?",
    "Mik√§ on t√§rkein totuutesi?",
    "Millainen hiljaisuus on arvokasta?",
    "Mist√§ syv√§st√§ asiasta haluaisit keskustella?",
    "Mik√§ on el√§m√§si suurin mysteeri?",
    "Miten kuuntelet itse√§si?",
    "Mik√§ tekee hetkest√§ pyh√§n?",
    "Millainen hiljaisuuden muoto on sinulle t√§rke√§?",
    "Mik√§ syv√§ pelko el√§√§ sis√§ll√§si?",
    "Miten l√∂yd√§t ytimesi?",
    "Mik√§ on suurin filosofinen kysymyksesi?",
    "Millainen kontemplatiivinen k√§yt√§nt√∂ sopisi sinulle?",
    "Mist√§ l√∂yd√§t merkityksen?",
    "Mik√§ on el√§m√§si syvempi tarkoitus?",
    "Miten yksinolo vaikuttaa sinuun?",
    "Mik√§ on t√§rkein sis√§inen viisautesi?",
    "Millainen hiljaisuus pelottaa sinua?",
    "Mist√§ arvoistasi et tingi?",
    "Mik√§ on syvimm√§n olemuksesi luonne?",
    "Miten meditaatio tai rauhoittuminen tukee sinua?",
    "Mik√§ kysymys johtaa aina syvemm√§lle?",
    "Millainen hiljaisuus parantaa?",
    "Mist√§ l√∂yd√§t henkisen kotisi?",
    "Mik√§ on syv√§llisint√§ kommunikaatiota?",
    "Miten luot tilaa sis√§iselle √§√§nellesi?",
    "Mik√§ totuus on vaikea kohdata?",
    "Millainen syvyys rikastuttaa el√§m√§√§si?",
    // Marraskuu (305-334)
    "Mik√§ on pimeydess√§si valoa?",
    "Miten k√§sittelet synkki√§ aikoja?",
    "Mik√§ tuo sinulle toivoa?",
    "Millainen pimeys on osa sinua?",
    "Mist√§ l√∂yd√§t valon pimeimpin√§ hetkin√§?",
    "Mik√§ puolesi kaipaa hyv√§ksynt√§√§?",
    "Miten hoidat masentuneisuutta?",
    "Mik√§ tekee sinusta resilientin?",
    "Millainen varjo sinulla on?",
    "Mist√§ ammennat voimaa vaikeina aikoina?",
    "Mik√§ on suurin pelkosi?",
    "Miten k√§sittelet ahdistusta?",
    "Mik√§ tuo sinulle lohtua?",
    "Millainen pimeys on luovaa?",
    "Mist√§ l√∂yd√§t rohkeutta?",
    "Mik√§ on sinulle turvasatama?",
    "Miten kohtaat kipusi?",
    "Mik√§ tekee sinusta rohkean?",
    "Millainen haavoittuvuus on voimaa?",
    "Mist√§ tied√§t selvi√§v√§si?",
    "Mik√§ on opettanut sinua k√§rsimys?",
    "Miten autat itse√§si pime√§n√§ aikana?",
    "Mik√§ on toivon l√§hteesi?",
    "Millainen pimeys on hyv√§ksytt√§v√§√§?",
    "Mist√§ l√∂yd√§t sis√§isen valosi?",
    "Mik√§ tekee sinusta sitke√§n?",
    "Miten muistutat itse√§si omasta arvostasi?",
    "Mik√§ on suurin haasteesi t√§ll√§ hetkell√§?",
    "Millainen tuki auttaa sinua?",
    "Mist√§ tied√§t, ett√§ huominen on parempi?",
    // Joulukuu (335-360)
    "Mist√§ olet kiitollinen t√§lt√§ vuodelta?",
    "Mik√§ on suurin oppisi t√§n√§ vuonna?",
    "Millainen olet kasvanut?",
    "Mik√§ hetki on ollut merkityksellisin?",
    "Kenelle haluat kiitt√§√§ t√§st√§ vuodesta?",
    "Mik√§ muutos on tapahtunut sinussa?",
    "Mist√§ olet ylpe√§ t√§lt√§ vuodelta?",
    "Millainen haave toteutui?",
    "Mik√§ yll√§tys ilahdutti sinua t√§n√§ vuonna?",
    "Miten olet muuttunut?",
    "Mik√§ unelma j√§i toteutumatta?",
    "Millaista hyv√§√§ tapahtui?",
    "Mist√§ virheest√§ opit t√§n√§ vuonna?",
    "Mik√§ suhde syveni?",
    "Millainen tavoite saavutettiin?",
    "Mist√§ on vaikea hyv√§stell√§ t√§m√§ vuosi?",
    "Mik√§ tekee sinusta kiitollisen juuri nyt?",
    "Millainen haluaisit olla ensi vuonna?",
    "Mik√§ unelma odottaa toteutumista?",
    "Miten haluat kasvaa ensi vuonna?",
    "Mik√§ on t√§rke√§ tavoitteesi?",
    "Millaista rakkautta haluat kokea?",
    "Mist√§ haluat oppia enemm√§n?",
    "Mik√§ seikkailu odottaa sinua?",
    "Millainen muutos on edess√§?",
    "Mit√§ lupaat itsellesi ensi vuodelle?",
    // Lis√§p√§iv√§t (361-365)
    "Mik√§ t√§st√§ vuodesta ansaitsee tulla muistelluksi viel√§ vuosien p√§√§st√§?",
    "Mist√§ olet kiitollinen itsess√§si juuri nyt?",
    "Mit√§ haluat j√§tt√§√§ t√§h√§n vuoteen lopullisesti?",
    "Mit√§ toivot salaa ensi vuodelta?",
    "Mill√§ sanoilla kuvailisit kulunutta vuotta itsellesi?"
];

// --- Autentikointi ---
document.getElementById("registerBtn").addEventListener("click", async () => {
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    try {
        await createUserWithEmailAndPassword(auth, email, password);
        alert("Rekister√∂ityminen onnistui!");
    } catch(e) { alert(e.message); }
});

document.getElementById("loginBtn").addEventListener("click", async () => {
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    try {
        await signInWithEmailAndPassword(auth, email, password);
    } catch(e) { alert(e.message); }
});

window.logout = function() { signOut(auth); }

onAuthStateChanged(auth, (user) => {
    if(user) {
        document.getElementById("loginContainer").style.display = "none";
        document.getElementById("diaryContainer").style.display = "block";
        generateWeek(currentWeek, user.uid);
    } else {
        document.getElementById("loginContainer").style.display = "block";
        document.getElementById("diaryContainer").style.display = "none";
    }
});

// --- P√§iv√§m√§√§r√§- ja viikkofunktiot ---
function getDateOfISOWeek(week, year) {
    const simple = new Date(year, 0, 1 + (week - 1) * 7);
    const dow = simple.getDay();
    const ISOweekStart = simple;
    if (dow <= 4)
        ISOweekStart.setDate(simple.getDate() - simple.getDay() + 1);
    else
        ISOweekStart.setDate(simple.getDate() + 8 - simple.getDay());
    return ISOweekStart;
}

function getDayOfYear(date) {
    const start = new Date(date.getFullYear(), 0, 0);
    const diff = date - start;
    const oneDay = 1000 * 60 * 60 * 24;
    return Math.floor(diff / oneDay);
}

// --- Viikon generointi ---
async function generateWeek(weekNumber, uid) {
    const container = document.getElementById("weekContainer");
    const weekNumberDiv = document.getElementById("weekNumber");

    const weekStart = getDateOfISOWeek(weekNumber, year);

    weekNumberDiv.innerText = "Viikko " + weekNumber;

    container.innerHTML = "";

    for(let i=0; i<7; i++) {
        const date = new Date(weekStart);
        date.setDate(weekStart.getDate() + i);

        // Laske p√§iv√§n numero vuodessa (1-365)
        const dayOfYear = getDayOfYear(date);
        
        // Hae kysymys listasta (dayOfYear - 1 koska array alkaa 0:sta)
        const questionIndex = (dayOfYear - 1) % allQuestions.length;
        const question = allQuestions[questionIndex];

        const key = year + "-" + date.toISOString().split("T")[0];

        // Hae tallennettu vastaus Firestoresta
        const docRef = doc(db, "diaries", uid + "_" + key);
        let savedText = "";
        try {
            const docSnap = await getDoc(docRef);
            if(docSnap.exists()) savedText = docSnap.data().answer || "";
        } catch(e){ console.log(e); }

        const card = document.createElement("div");
        card.className = "day-card";
        card.innerHTML = `
            <div class="day-title">${days[i]}</div>
            <div class="question">${question}</div>
            <textarea rows="4" placeholder="Kirjoita ajatuksesi t√§h√§n...">${savedText}</textarea>
        `;
        const textarea = card.querySelector("textarea");
        textarea.addEventListener("change", async () => {
            try {
                await setDoc(doc(db, "diaries", uid + "_" + key), { answer: textarea.value });
            } catch(e){ console.log(e); }
        });

        container.appendChild(card);
    }
}

window.nextWeek = function(){ 
    if(currentWeek<53){ 
        currentWeek++; 
        generateWeek(currentWeek, auth.currentUser.uid); 
    }
}

window.prevWeek = function(){ 
    if(currentWeek>1){ 
        currentWeek--; 
        generateWeek(currentWeek, auth.currentUser.uid); 
    }
}

</script>
</body>
</html>
